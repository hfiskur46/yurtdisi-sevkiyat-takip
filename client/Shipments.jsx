import React,{useEffect,useState} from 'react';import axios from 'axios';export default function Shipments(){ const [data,setData]=useState([]); useEffect(()=>{ axios.get('/api/shipments',{headers:{Authorization:'Bearer '+localStorage.getItem('token')}}).then(r=>setData(r.data)).catch(()=>{}); },[]); const add=async()=>{ const body={shipmentNo:'TRK-AUTO',mode:'Karayolu',customer:'Yeni',origin:'Istanbul',destination:'Bucharest',status:'Yolda',profit:0}; const r=await axios.post('/api/shipments', body, {headers:{Authorization:'Bearer '+localStorage.getItem('token')}}); setData(prev=>[r.data,...prev]); }; const markDone=async(id)=>{ await axios.put('/api/shipments/'+id,{status:'Teslim'},{headers:{Authorization:'Bearer '+localStorage.getItem('token')}}); setData(prev=>prev.map(p=>p.id===id?{...p,status:'Teslim'}:p)); }; return (<div className='max-w-7xl mx-auto space-y-4'><div className='flex justify-between items-center'><h2 className='text-xl font-semibold'>Sevkiyatlar</h2><div className='flex gap-2'><button onClick={add} className='btn-fiori'>Yeni Sevkiyat</button></div></div><div className='card overflow-x-auto'><table className='w-full text-sm'><thead className='text-slate-500'><tr><th className='p-2 text-left'>No</th><th className='p-2 text-left'>Mod</th><th className='p-2 text-left'>Müşteri</th><th className='p-2 text-left'>Durum</th><th className='p-2 text-left'>Kâr</th><th className='p-2 text-left'>İşlem</th></tr></thead><tbody>{data.map(d=>(<tr key={d.id} className='border-t'><td className='p-2'>{d.shipmentNo}</td><td className='p-2'>{d.mode}</td><td className='p-2'>{d.customer}</td><td className='p-2'>{d.status}</td><td className='p-2'>{d.profit}</td><td className='p-2'><button onClick={()=>markDone(d.id)} className='bg-blue-600 text-white px-2 py-1 rounded text-sm'>Teslim</button></td></tr>))}</tbody></table></div></div>